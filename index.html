<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickTrend</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico">
　　　<script src="https://kit.fontawesome.com/12802bf766.js" crossorigin="anonymous"></script>
</head>
<body>
   <div id="loading-screen">
       <h1>Quick<br>Trend</h1>
   </div>

<div id="termsPage">    
       
     <div class="header-buttons">
          <a href="sighin.html" class="in">ログイン</a>
          <a href="sighup.html" class="up">新規会員登録</a>
     </div>

           <div class="page">
              <h1 class="typing-text" id="animation">Quick Trend</h1>

                    <img src="image.jpg" class="imageone">
    
                       <section class="header">
                                 <div class="new">Neo-Social
                                 </div>
                                       <div class="text_wrap">
                                          <p class="explain">QuickTrendへようこそ。Feelingの共有・まだ見ぬ発見を</p>
                                       </div>
                         </section>
           </div>
                    <div class="feature">
                       <p class="intro">QuickTrendの主な機能</p>
                              <div class="feature-item">
                               <h3><span>ここがすごい!</span>機能1</h3>
                                <p>地図で店やお気に入りの場所をタップするとグラフが表示され、そこに来た人の訪問人数が分かり、どこが有名の場所なのか一目でわかる！？</p>
                              </div>
               <div class="feature-item">
                  <h3>機能2</h3>
                    <p>こまめに更新される簡単なアンケートで、仲間たちとフィーリングを共有できる！気軽にできるのでハードルの高さが心配な人でも大丈夫！</p>
               </div>
                         <div class="feature-item">
                         <h3>機能3</h3>
                          <p>12種類のジャンルから興味のあるトピックを選択可能。同じ考えの人同士でチャットができる！団らんの場にしてもよし、地域振興の計画を立てるのもよし！</p>
                          </div>
                    </div>
                    
</div>
   

    <!-- ジャンル一覧画面 (ChatReal)-->
<div id="genreListPage" style="display:none;">
    <h3>ジャンル一覧</h3>
    <ul id="genreList">
        <li>
            <button class="genreButton" data-genre="クリエイトバザール"
        data-tooltip="地域振興の為のアイデアを出し合いましょう！">
        <i class="fa-solid fa-comments-dollar" style="color: #b8fb3c; font-size: 56px;"></i>
            <span>クリエイトバザール</span></button></li>
        <li><button class="genreButton" data-genre="つながリンク"
        data-tooltip="町の人々と楽しめる交流イベントを計画しましょう！">
        <i class="fa-solid fa-comments" style="color: #4fe38f; font-size: 56px;"></i>
        <span>つながリンク</span></button></li>
        <li>
            <button class="genreButton" data-genre="トレンドスポット"
        data-tooltip="若い世代にしかない発想で様々な催しを計画しましょう！">        
        <i class="fa-solid fa-people-group" style="color: #15e523; font-size: 56px;"></i>
        <span>トレンドスポット</span></button></li>
        <li><button class="genreButton" data-genre="わくわくワークショップ"
        data-tooltip="社会奉仕のワークショップ等のアイデアを出しましょう！">    
        <i class="fa-solid fa-place-of-worship" style="color: #29c2e0; font-size: 56px;"></i>
        <span>わくわくワークショップ</span></button></li>
        <li>
            <button class="genreButton" data-genre="ハッピーリビング"
            data-tooltip="暮らしが楽しくなる家庭関連のアイデアを出しましょう！">    
            <i class="fa-solid fa-people-roof" style="color: #9ad5a4; font-size: 56px;"></i>
        <span>ハッピーリビング</span></button></li>
        <li><button class="genreButton" data-genre="政治経済"
            data-tooltip="経済リテラシーや良い政治の案などを出しましょう！">
            <i class="fa-solid fa-landmark-dome" style="color: #FFD43B; font-size: 56px;"></i>
        <span>政治経済</span></button></li>
        <li><button class="genreButton" data-genre="くらしのバリア"
            data-tooltip="安浦を住みやすい街にするにはどうしたらよいでしょうか？">
            <i class="fa-solid fa-helmet-safety" style="color: #2cce47; font-size: 56px;"></i>
        <span>くらしのバリア</span></button></li>
        <li><button class="genreButton" data-genre="LOVESPACE"
            data-tooltip="町の人同士で今よりも愛で満ちた暮らしにしませんか？">
            <i class="fa-solid fa-face-grin-hearts" style="color: #fbff14; font-size: 56px;"></i>
        <span>LOVESPACE</span></button></li>
         <li><button class="genreButton" data-genre="チャレンジステップ"
             data-tooltip="町の人々とともに冒険をしてみませんか？">
             <i class="fa-brands fa-space-awesome" style="color: #09d3cf; font-size: 56px;"></i>
         <span>チャレンジステップ</span></button></li>
         <li><button class="genreButton" data-genre="CREATION"
             data-tooltip="町の人々とともに創造的なアイディアを出し合いましょう！">
             <i class="fa-regular fa-lightbulb" style="color: #e9e216; font-size: 56px;"></i>
         <span>CREATION</span></button></li>
          <li><button class="genreButton" data-genre="リラックススペース"
              data-tooltip="日々の疲れを癒せるようなアイディアを出し合いましょう！">
              <i class="fa-solid fa-couch" style="color: #f38e1b; font-size: 56px;"></i>
          <span>リラックススペース</span></button></li>
         <li><button class="genreButton" data-genre="ミライソダテル"
             data-tooltip="子供たちのためになるアイディアを出し合いましょう！">
            <i class="fa-solid fa-seedling" style="color: #21e441; font-size: 56px;"></i>
    　<span>ミライソダテル</span></button></li>
    </ul>
</div>

<!-- 投稿画面 -->
<div id="postPage" style="display:none;">
  <div class="container">
    <!-- タイトル -->
    <h3 id="postTitle">クリエイトバザール部門の投稿</h3>

    <!-- 投稿フォーム -->
    <form id="postForm" action="test.html" method="post" enctype="multipart/form-data"> 
      <button id="backButton" class="back-button">前のページに戻る</button>

      <!-- 入力フィールド -->
      <div class="form-group">
        <label for="username">ユーザー名:</label>
        <input type="text" id="username" class="input-field" required>
      </div>

      <div class="form-group">
        <label for="postContent">投稿内容:</label>
        <textarea id="postContent" class="textarea-field" placeholder="ここに投稿内容を記載してください（不適切な投稿は控えてください）" required></textarea>
      </div>

      <div class="form-group">
        <label for="filebox">添付ファイル:</label>
        <input type="file" name="test" id="filebox" class="file-input" accept="image/*">
      </div>

      <button type="submit" class="submit-button">投稿</button>
    </form>

    <!-- 投稿履歴 -->
    <div id="postHistory" class="post-history">
      <h2>投稿履歴</h2>
      <ul id="postList"></ul>
    </div>
  </div>
</div>


<script>
window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        document.getElementById('loading-screen').style.display = 'none';
        document.getElementById('termsPage').style.display = 'block';
      }, 3000);
    });

// フェードイン関係
    const featureItems = document.querySelectorAll('.feature-item');

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('fade-in');
      }
    });
  }, {
    threshold: 0.1
  });

  featureItems.forEach(item => {
    observer.observe(item);
  });
    
    document.addEventListener('DOMContentLoaded', function() {
        const agreeCheckbox = document.getElementById('agreeCheckbox');
        const agreeButton = document.getElementById('agreeButton');
        const termsPage = document.getElementById('termsPage');
        const registrationPage = document.getElementById('registrationPage');
        const genrePage = document.getElementById('genrePage');
        const genreListPage = document.getElementById('genreListPage');
        const postPage = document.getElementById('postPage');
        const postTitle = document.getElementById('postTitle');
        const postForm = document.getElementById('postForm');
        const postContent = document.getElementById('postContent');
        const postList = document.getElementById('postList');
       const loginForm = document.getElementById('loginform'); // 追加


        // ジャンルボタンをクリックすると該当ジャンルページを表示します
        document.querySelectorAll('.genreButton').forEach(button => {
            button.addEventListener('click', function() {
                const genre = this.dataset.genre;
                postTitle.textContent = `${genre} の投稿`;
                genreListPage.style.display = 'none';
                postPage.style.display = 'block';
                loadPosts(genre);  // 選択したジャンルの投稿を localStorage から読み込む
            });
        });

        //追加　postPage から genreListPage に移動できます
        document.getElementById('backButton').addEventListener('click', function() { 
    document.getElementById('postPage').style.display = 'none';
    document.getElementById('genreListPage').style.display = 'block';
});


  
        
        // 投稿を処理する機能
        postForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const content = postContent.value;
            const genre = postTitle.textContent.split(' ')[0];
            const timestamp = new Date().toLocaleString();
            const file = filebox.files[0]; // Correctly reference the file input

            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const base64Data = e.target.result;
                    const post = { username, content, media: base64Data, timestamp };

                    // ローカルストレージに保存
                    let posts = JSON.parse(localStorage.getItem(genre)) || [];
                    posts.push(post);
                    localStorage.setItem(genre, JSON.stringify(posts));

                    // 投稿を表示する
                    displayPost(post);
                    postForm.reset(); // 投稿後にフォームをリセットする
                };
                reader.readAsDataURL(file); // ファイルをBase64に変換する
            } else {
                const post = { username, content, media: null, timestamp };
                let posts = JSON.parse(localStorage.getItem(genre)) || [];
                posts.push(post);
                localStorage.setItem(genre, JSON.stringify(posts));
                displayPost(post);
                postForm.reset(); // 投稿後にフォームをリセットする
            }
        });

        // 選択したジャンルの投稿を localStorage から読み込む
        function loadPosts(genre) {
            postList.innerHTML = '';
            const posts = JSON.parse(localStorage.getItem(genre)) || [];
            posts.forEach(post => displayPost(post));
        }

        // 投稿を表示する
        function displayPost(post) {
            const li = document.createElement('li');
            li.innerHTML = `<strong>${post.username}</strong> (${post.timestamp})<br>${post.content}`;

            // 投稿にメディアがある場合は、適切な要素を作成する
            if (post.media) {
                // プレフィックスに基づいてメディアが画像であるかビデオであるかを判断する
                const mediaType = post.media.startsWith('data:image/') ? 'image' : 'video';
                const mediaElement = document.createElement(mediaType === 'image' ? 'img' : 'video');
                
                if (mediaType === 'image') {
                    mediaElement.src = post.media; // Set image source
                    mediaElement.style.maxWidth = '200px'; // Set maximum width for the image
                } else {
                    mediaElement.controls = true; // Add controls for video
                    mediaElement.src = post.media; // Set video source
                }

                li.appendChild(mediaElement);
            }

            postList.appendChild(li);
        }
    });
</script>

</body>
</html>
